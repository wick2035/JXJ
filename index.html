<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奖学金评定系统</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script>
        // 立即执行反注入防护
        (function() {
            'use strict';
            const blockedDomains = ['rumt-zh.com', 'apmplus.cn', 'arms.aliyuncs.com'];
            const blockedScripts = ['apmInject', 'aegisInject', 'operateType', 'reportEvent'];
            
            // 清理全局变量
            ['VM892', 'VM893', 'VM894', 'operateType', 'reportEvent', 'setConfig'].forEach(v => {
                try { delete window[v]; } catch(e) {}
            });
            
            // 拦截脚本注入
            const originalCreateElement = document.createElement;
            document.createElement = function(tagName) {
                const el = originalCreateElement.call(document, tagName);
                if (tagName.toLowerCase() === 'script') {
                    const desc = Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype, 'src');
                    Object.defineProperty(el, 'src', {
                        set: function(value) {
                            if (blockedDomains.some(d => value.includes(d)) || 
                                blockedScripts.some(s => value.includes(s))) {
                                console.log('阻止脚本:', value);
                                return;
                            }
                            desc.set.call(this, value);
                        },
                        get: desc.get
                    });
                }
                return el;
            };
            
            // 拦截网络请求
            const originalFetch = window.fetch;
            window.fetch = function(url) {
                if (typeof url === 'string' && blockedDomains.some(d => url.includes(d))) {
                    return Promise.reject(new Error('Blocked'));
                }
                return originalFetch.apply(this, arguments);
            };
            
            // 清理控制台
            const originalError = console.error;
            console.error = function(...args) {
                if (blockedScripts.some(s => args.join(' ').includes(s))) return;
                originalError.apply(console, args);
            };
        })();
    </script>
    <script src="assets/js/error-handler.js"></script>
    <script src="assets/js/main.js" defer></script>
</head>
<body>
    <!-- 检查是否已安装 -->
    <script>
        // 检查是否已安装，如果未安装则跳转到安装页面
        fetch('install.php?action=check_install')
            .then(response => response.json())
            .then(data => {
                if (!data.installed) {
                    window.location.href = 'install.html';
                }
            })
            .catch(error => {
                console.log('检查安装状态失败，继续加载页面');
            });
    </script>

    <!-- 登录页面 -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-card glass">
                <div class="logo">奖</div>
                <h1 class="login-title">奖学金评定系统</h1>
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">用户名</label>
                        <input type="text" id="username" class="form-input" placeholder="请输入用户名" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">密码</label>
                        <input type="password" id="password" class="form-input" placeholder="请输入密码" required>
                    </div>
                    <button type="submit" class="login-btn">登录系统</button>
                </form>
                <div style="margin-top: 20px; color: rgba(255, 255, 255, 0.6); font-size: 12px;">
                    账号：学号 | 初始密码：学号.0
                </div>
            </div>
        </div>
    </div>

    <!-- 学生主页 -->
    <div id="studentPage" class="page">
        <div class="main-container">
            <div class="header glass">
                <h1 class="header-title">奖学金申报</h1>
                <div class="user-info">
                    <div class="avatar">学</div>
                    <div>
                        <div>学生用户</div>
                        <div style="font-size: 12px; opacity: 0.7;">申报系统</div>
                    </div>
                    <button class="btn-secondary" style="margin-right: 10px;" onclick="showChangePasswordModal()">修改密码</button>
                    <button class="logout-btn" onclick="logout()">退出</button>
                </div>
            </div>

            <div class="upload-container">
                <!-- 可申报批次 -->
                <div class="card glass">
                    <div class="card-title">
                        <div class="card-icon">📋</div>
                        可申报批次
                    </div>
                    <div class="batch-list" id="batchList">
                        <!-- 批次列表将在这里动态生成 -->
                    </div>
                </div>

                <!-- 我的申请 -->
                <div class="card glass" style="margin-top: 30px;">
                    <div class="card-title">
                        <div class="card-icon">📄</div>
                        我的申请
                    </div>
                    <div class="application-list" id="myApplicationsList">
                        <!-- 申请列表将在这里动态生成 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 公告按钮 -->
        <button class="announcement-btn" id="announcementBtn" onclick="showAnnouncementModal()">
            📢
        </button>
    </div>

    <!-- 学生申报页面 -->
    <div id="applicationPage" class="page">
        <div class="main-container">
            <div class="header glass">
                <h1 class="header-title">材料上传</h1>
                <div class="user-info">
                    <button class="btn-outline btn" onclick="showStudentPage()">返回列表</button>
                    <button class="logout-btn" onclick="logout()">退出</button>
                </div>
            </div>

            <div class="upload-container">
                <div class="card glass">
                    <div class="card-title">
                        <div class="card-icon">📁</div>
                        <span id="currentBatchTitle">奖学金申请</span>
                    </div>
                    
                    <div id="categoriesContainer">
                        <!-- 类目上传区域将在这里动态生成 -->
                    </div>
                    <div style="margin-top: 30px; text-align: center;">
                        <button class="btn" onclick="submitApplication()" style="padding: 15px 40px;" id="submitBtn">提交申请</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 公告按钮 -->
        <button class="announcement-btn minimized" onclick="showAnnouncementModal()">
            📢
        </button>
    </div>

    <!-- 管理员页面 -->
    <div id="adminPage" class="page">
        <div class="main-container">
            <div class="header glass">
                <h1 class="header-title">奖学金管理</h1>
                <div class="user-info">
                    <div class="avatar">管</div>
                    <div>
                        <div>管理员</div>
                        <div style="font-size: 12px; opacity: 0.7;">系统管理员</div>
                    </div>
                    <button class="logout-btn" onclick="logout()">退出</button>
                </div>
            </div>

            <div class="admin-tabs">
                <button class="tab-btn active" onclick="switchTab('overview')">系统概览</button>
                <button class="tab-btn" onclick="switchTab('announcements')">公告管理</button>
                <button class="tab-btn" onclick="switchTab('batches')">批次管理</button>
                <button class="tab-btn" onclick="switchTab('itemManagement')">奖项管理</button>
                <button class="tab-btn" onclick="switchTab('categories')">类目管理</button>
                <button class="tab-btn" onclick="switchTab('userManagement')">用户管理</button>
                <button class="tab-btn" onclick="switchTab('ranking')">数据排名</button>
                <button class="tab-btn" onclick="switchTab('materials')">材料审核</button>
            </div>

            <!-- 系统概览 -->
            <div id="overviewTab" class="tab-content active">
                <div class="dashboard">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">📊</div>
                            统计概览
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 12px; text-align: center;">
                                <span style="color: white; font-size: 24px; font-weight: bold; display: block;" id="totalApplications">0</span>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 12px; margin-top: 5px;">申请总数</div>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 12px; text-align: center;">
                                <span style="color: white; font-size: 24px; font-weight: bold; display: block;" id="totalCategories">0</span>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 12px; margin-top: 5px;">类目总数</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 公告管理 -->
            <div id="announcementsTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">📢</div>
                            发布公告
                        </div>
                        <form id="announcementForm">
                            <div class="form-group">
                                <label class="form-label">公告标题</label>
                                <input type="text" id="announcementTitle" class="form-input" placeholder="请输入公告标题" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">公告内容</label>
                                <textarea id="announcementContent" class="form-textarea" placeholder="请输入公告内容" required></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">发布类型</label>
                                <select id="announcementType" class="form-select">
                                    <option value="normal">普通公告</option>
                                    <option value="important">重要公告</option>
                                    <option value="urgent">紧急公告</option>
                                </select>
                            </div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button type="submit" class="btn" style="padding: 12px 30px;">发布公告</button>
                                <button type="button" class="btn-outline btn" onclick="clearAnnouncementForm()" style="padding: 12px 30px;">清空表单</button>
                            </div>
                        </form>
                    </div>

                    <div class="card glass" style="margin-top: 30px;">
                        <div class="card-title">
                            <div class="card-icon">📋</div>
                            公告历史
                        </div>
                        <div id="announcementHistory">
                            <!-- 公告历史将在这里显示 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 批次管理 -->
            <div id="batchesTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">📅</div>
                            添加批次
                        </div>
                        <form id="batchForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">批次名称</label>
                                    <input type="text" id="batchName" class="form-input" placeholder="请输入批次名称" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">批次描述</label>
                                    <input type="text" id="batchDescription" class="form-input" placeholder="请输入批次描述">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">开始日期</label>
                                    <input type="date" id="batchStartDate" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">结束日期</label>
                                    <input type="date" id="batchEndDate" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">状态</label>
                                    <select id="batchStatus" class="form-select" required>
                                        <option value="open">开放</option>
                                        <option value="closed">关闭</option>
                                    </select>
                                </div>
                            </div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button type="submit" class="btn" style="padding: 12px 30px;">添加批次</button>
                                <button type="button" class="btn-outline btn" onclick="clearBatchForm()" style="padding: 12px 30px;">清空表单</button>
                            </div>
                        </form>
                    </div>

                    <div class="card glass" style="margin-top: 30px;">
                        <div class="card-title">
                            <div class="card-icon">📋</div>
                            批次列表
                        </div>
                        <div id="batchesList">
                            <!-- 批次列表将在这里显示 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 奖项管理 -->
            <div id="itemManagementTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">🏆</div>
                            添加奖项
                        </div>
                        <div class="category-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">选择类别</label>
                                    <select id="categorySelectForItem" class="form-select">
                                        <option value="">请选择类别</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">奖项名称</label>
                                    <input type="text" id="newItemName" class="form-input" placeholder="请输入奖项名称">
                                </div>
                                <button class="btn" onclick="addNewItemToCategory()">添加奖项</button>
                            </div>
                        </div>
                    </div>

                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">📋</div>
                            奖项列表与分数配置
                        </div>
                        <div id="itemsListContainer">
                            <!-- 奖项列表将在这里动态生成 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 类目管理 -->
            <div id="categoriesTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">➕</div>
                            添加类目
                        </div>
                        <div class="category-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">类目名称</label>
                                    <input type="text" id="categoryName" class="form-input" placeholder="请输入类目名称">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">分数</label>
                                    <input type="number" id="categoryScore" class="form-input" placeholder="分数" min="0" max="100">
                                </div>
                                <button class="btn" onclick="addCategory()">添加</button>
                            </div>
                        </div>
                    </div>

                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">📝</div>
                            类目列表
                        </div>
                        <div class="category-list" id="categoryList">
                            <!-- 类目列表将在这里动态生成 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 用户管理 -->
            <div id="userManagementTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">👥</div>
                            添加用户
                        </div>
                        <form id="userForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">用户名</label>
                                    <input type="text" id="newUsername" class="form-input" placeholder="请输入用户名" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">密码</label>
                                    <input type="password" id="addUserPassword" class="form-input" placeholder="请输入密码" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">用户类型</label>
                                    <select id="userType" class="form-select" required>
                                        <option value="">请选择用户类型</option>
                                        <option value="student">学生</option>
                                        <option value="admin">管理员</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">真实姓名</label>
                                    <input type="text" id="realName" class="form-input" placeholder="请输入真实姓名">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">邮箱</label>
                                    <input type="email" id="userEmail" class="form-input" placeholder="请输入邮箱">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">手机号</label>
                                    <input type="tel" id="userPhone" class="form-input" placeholder="请输入手机号">
                                </div>
                            </div>
                            <div class="form-row" id="studentFields" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">学号</label>
                                    <input type="text" id="studentId" class="form-input" placeholder="请输入学号">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">班级</label>
                                    <input type="text" id="userClass" class="form-input" placeholder="请输入班级">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">专业</label>
                                    <input type="text" id="userMajor" class="form-input" placeholder="请输入专业">
                                </div>
                            </div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button type="submit" class="btn" style="padding: 12px 30px;">添加用户</button>
                                <button type="button" class="btn-outline btn" onclick="clearUserForm()" style="padding: 12px 30px;">清空表单</button>
                            </div>
                        </form>
                    </div>

                    <div class="card glass" style="margin-top: 30px;">
                        <div class="card-title">
                            <div class="card-icon">📥</div>
                            批量导入用户
                        </div>
                        <div style="margin-bottom: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px;">
                            <div style="color: rgba(59, 130, 246, 0.8); font-size: 14px; margin-bottom: 10px;">
                                <strong>使用说明：</strong>
                            </div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 13px; line-height: 1.5;">
                                1. 请先下载模板文件，按照模板格式填写用户信息<br>
                                2. 文件格式必须为CSV格式，编码为UTF-8<br>
                                3. 用户名、密码、用户类型为必填项<br>
                                4. 用户类型只能填写"student"或"admin"<br>
                                5. 文件大小不能超过5MB
                            </div>
                        </div>
                        <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 20px;">
                            <button class="btn-outline btn" onclick="downloadUserTemplate()" style="padding: 12px 24px;">
                                📄 下载模板
                            </button>
                            <div style="flex: 1;">
                                <input type="file" id="userImportFile" accept=".csv" style="display: none;" onchange="handleUserImportFileSelect(event)">
                                <button class="btn-outline btn" onclick="document.getElementById('userImportFile').click()" style="padding: 12px 24px;">
                                    📁 选择文件
                                </button>
                            </div>
                        </div>
                        <div id="importFileInfo" style="display: none; margin-bottom: 15px; padding: 10px; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; color: rgba(34, 197, 94, 0.8); font-size: 13px;">
                            已选择文件：<span id="importFileName"></span>
                        </div>
                        <div style="text-align: center;">
                            <button id="importUsersBtn" class="btn" onclick="importUsers()" disabled style="padding: 12px 30px; pointer-events: auto !important;">
                                📥 开始导入
                            </button>
                        </div>
                        <div id="importProgress" style="display: none; margin-top: 20px;">
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 14px; margin-bottom: 10px;">导入进度</div>
                            <div style="background: rgba(255, 255, 255, 0.1); border-radius: 4px; height: 8px; overflow: hidden;">
                                <div id="importProgressBar" style="background: linear-gradient(90deg, #3b82f6, #06d6a0); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                            </div>
                            <div id="importProgressText" style="color: rgba(255, 255, 255, 0.7); font-size: 12px; margin-top: 5px;">准备中...</div>
                        </div>
                    </div>

                    <div class="card glass" style="margin-top: 30px;">
                        <div class="card-title">
                            <div class="card-icon">📋</div>
                            用户列表
                        </div>
                        <div id="usersList">
                            <!-- 用户列表将在这里显示 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 数据排名 -->
            <div id="rankingTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">📊</div>
                            批次排名查询
                        </div>
                        <div class="ranking-controls">
                            <div class="form-group">
                                <label class="form-label">选择批次</label>
                                <select id="rankingBatchSelect" class="form-select" onchange="loadBatchRanking()">
                                    <option value="">请选择批次</option>
                                </select>
                            </div>
                            <button class="export-btn" onclick="exportRankingToExcel()" id="exportBtn" disabled>
                                📥 导出Excel
                            </button>
                        </div>
                        <div id="rankingTableContainer">
                            <!-- 排名表格将在这里显示 -->
                        </div>
                    </div>
                    
                    <!-- 学生申请统计 -->
                    <div class="card glass" style="margin-top: 30px;">
                        <div class="card-title">
                            <div class="card-icon">📈</div>
                            学生申请统计
                        </div>
                        <div class="stats-controls" style="margin-bottom: 20px;">
                            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">筛选批次</label>
                                    <select id="statsBatchSelect" class="form-select" onchange="loadStudentStats()" style="max-width: 200px;">
                                        <option value="">全部批次</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label class="form-label">筛选班级</label>
                                    <select id="statsClassSelect" class="form-select" onchange="loadStudentStats()" style="max-width: 200px;">
                                        <option value="">全部班级</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="statsContainer">
                            <!-- 统计数据将在这里显示 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 材料审核 -->
            <div id="materialsTab" class="tab-content">
                <div class="upload-container">
                    <div class="card glass">
                        <div class="card-title">
                            <div class="card-icon">👁️</div>
                            学生申请审核
                        </div>
                        <div class="audit-controls" style="margin-bottom: 20px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">审核状态筛选</label>
                                <select id="auditStatusFilter" class="form-select" onchange="filterApplicationsByStatus()" style="max-width: 200px;">
                                    <option value="">全部申请</option>
                                    <option value="pending">待审核</option>
                                    <option value="approved">已通过</option>
                                    <option value="rejected">已驳回</option>
                                </select>
                            </div>
                        </div>
                        <div class="student-materials" id="studentMaterials">
                            <!-- 学生材料将在这里动态生成 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 公告弹窗 -->
    <div id="announcementModal" class="announcement-modal hidden">
        <div class="announcement-content">
            <div class="announcement-header">
                <h2 class="announcement-title" id="modalAnnouncementTitle">系统公告</h2>
                <button class="announcement-close" onclick="closeAnnouncementModal()">×</button>
            </div>
            <div class="announcement-body" id="modalAnnouncementBody">
                <!-- 公告内容将在这里显示 -->
            </div>
            <div class="announcement-footer">
                <div class="announcement-date" id="modalAnnouncementDate"></div>
                <div class="announcement-actions">
                    <button class="announcement-btn-action btn-no-remind" onclick="dontRemindToday()">今日不再提醒</button>
                    <button class="announcement-btn-action btn-close" onclick="closeAnnouncementModal()">知道了</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 修改密码弹窗 -->
    <div id="changePasswordModal" class="announcement-modal hidden">
        <div class="announcement-content glass" style="min-width: 450px; max-width: 500px;">
            <div class="announcement-header">
                <h2 class="announcement-title">修改密码</h2>
                <button class="announcement-close" onclick="closeChangePasswordModal()">×</button>
            </div>
            <div class="announcement-body">
                <form id="changePasswordForm">
                    <div class="form-group" id="currentPasswordGroup">
                        <label class="form-label">当前密码</label>
                        <input type="password" id="currentPassword" class="form-input" placeholder="请输入当前密码">
                    </div>
                    <div class="form-group">
                        <label class="form-label">新密码</label>
                        <input type="password" id="newPassword" class="form-input" placeholder="请输入新密码（至少6位）" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">确认新密码</label>
                        <input type="password" id="confirmPassword" class="form-input" placeholder="请再次输入新密码" required>
                    </div>
                    <div class="announcement-actions">
                        <button type="button" class="btn-cancel" onclick="closeChangePasswordModal()">取消</button>
                        <button type="submit" class="btn-primary">确认修改</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 编辑用户弹窗 -->
    <div id="editUserModal" class="announcement-modal hidden">
                        <div class="announcement-content" style="min-width: 600px; max-width: 800px;">
            <div class="announcement-header">
                <h2 class="announcement-title">编辑用户</h2>
                <button class="announcement-close" onclick="closeEditUserModal()">×</button>
            </div>
            <div class="announcement-body">
                <form id="editUserForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">用户名</label>
                            <input type="text" id="editUsername" class="form-input" placeholder="请输入用户名" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">新密码（留空不修改）</label>
                            <input type="password" id="editPassword" class="form-input" placeholder="请输入新密码">
                        </div>
                        <div class="form-group">
                            <label class="form-label">用户类型</label>
                            <select id="editUserType" class="form-select" required>
                                <option value="student">学生</option>
                                <option value="admin">管理员</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">真实姓名</label>
                            <input type="text" id="editRealName" class="form-input" placeholder="请输入真实姓名">
                        </div>
                        <div class="form-group">
                            <label class="form-label">邮箱</label>
                            <input type="email" id="editUserEmail" class="form-input" placeholder="请输入邮箱">
                        </div>
                        <div class="form-group">
                            <label class="form-label">手机号</label>
                            <input type="tel" id="editUserPhone" class="form-input" placeholder="请输入手机号">
                        </div>
                    </div>
                    <div class="form-row" id="editStudentFields" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">学号</label>
                            <input type="text" id="editStudentId" class="form-input" placeholder="请输入学号">
                        </div>
                        <div class="form-group">
                            <label class="form-label">班级</label>
                            <input type="text" id="editUserClass" class="form-input" placeholder="请输入班级">
                        </div>
                        <div class="form-group">
                            <label class="form-label">专业</label>
                            <input type="text" id="editUserMajor" class="form-input" placeholder="请输入专业">
                        </div>
                    </div>
                    <input type="hidden" id="editUserId">
                </form>
            </div>
            <div class="announcement-footer">
                <div class="announcement-actions">
                    <button class="announcement-btn-action btn-close" onclick="closeEditUserModal()">取消</button>
                    <button class="announcement-btn-action btn" onclick="saveUserEdit()">保存</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html> 